{"version":3,"file":"cart-summary-ac8538c4.js","mappings":"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","sources":["webpack://checkout/./packages/core/src/app/cart/CartSummary.tsx","webpack://checkout/./packages/core/src/app/cart/EditLink.tsx","webpack://checkout/./packages/core/src/app/coupon/AppliedCoupon.tsx","webpack://checkout/./packages/core/src/app/giftCertificate/AppliedGiftCertificate.tsx","webpack://checkout/./packages/core/src/app/ui/icon/IconRemove.tsx","webpack://checkout/./packages/core/src/app/cart/AppliedRedeemable.tsx","webpack://checkout/./packages/core/src/app/cart/AppliedRedeemables.tsx","webpack://checkout/./packages/core/src/app/cart/Redeemable.tsx","webpack://checkout/./packages/core/src/app/cart/mapToCartSummaryProps.ts","webpack://checkout/./packages/core/src/app/cart/mapToRedeemableProps.ts","webpack://checkout/./packages/core/src/app/cart/withRedeemable.tsx","webpack://checkout/./packages/core/src/app/cart/mapToOrderSummarySubtotalsProps.ts","webpack://checkout/./packages/core/src/app/order/OrderSummaryHeader.tsx","webpack://checkout/./packages/core/src/app/order/OrderSummary.tsx","webpack://checkout/./packages/core/src/app/order/removeBundledItems.ts"],"sourcesContent":["import { Checkout, ShopperCurrency, StoreCurrency } from '@bigcommerce/checkout-sdk';\nimport React, { FunctionComponent } from 'react';\n\nimport { withCheckout } from '../checkout';\nimport { isBuyNowCart } from '../common/utility';\nimport OrderSummary from '../order/OrderSummary';\n\nimport mapToCartSummaryProps from './mapToCartSummaryProps';\nimport withRedeemable from './withRedeemable';\nimport EditLink from './EditLink';\nimport { RedeemableProps } from './Redeemable';\n\nexport type WithCheckoutCartSummaryProps = {\n    checkout: Checkout;\n    cartUrl: string;\n    storeCurrency: StoreCurrency;\n    shopperCurrency: ShopperCurrency;\n    storeCreditAmount?: number;\n} & RedeemableProps;\n\nconst CartSummary: FunctionComponent<WithCheckoutCartSummaryProps> = ({\n    cartUrl,\n    ...props\n}) => {\n    const headerLink = isBuyNowCart() ? null : <EditLink url={ cartUrl } />;\n\n    return (\n        withRedeemable(OrderSummary)({\n            ...props,\n            cartUrl,\n            headerLink,\n        })\n    );\n};\n\nexport default withCheckout(mapToCartSummaryProps)(CartSummary);\n","import React, { memo, FunctionComponent } from 'react';\n\nimport { TranslatedString } from '../locale';\n\nexport interface EditLinkProps {\n    className?: string;\n    url: string;\n}\n\nconst EditLink: FunctionComponent<EditLinkProps> = ({ className, url }) => (\n    <a\n        className={ className || 'cart-header-link' }\n        data-test=\"cart-edit-link\"\n        href={ url }\n        id=\"cart-edit-link\"\n        target=\"_top\"\n    >\n        <TranslatedString id=\"cart.edit_cart_action\" />\n    </a>\n);\n\nexport default memo(EditLink);\n","import { Coupon } from '@bigcommerce/checkout-sdk';\nimport React, { memo, FunctionComponent } from 'react';\n\nimport { TranslatedString } from '../locale';\n\nexport interface AppliedCouponProps {\n    coupon: Coupon;\n}\n\nconst AppliedCoupon: FunctionComponent<AppliedCouponProps> = ({ coupon }) => (\n    <div\n        className=\"redeemable-column redeemable-info\"\n        data-test=\"redeemable-item--coupon\"\n    >\n        <span className=\"redeemable-info-header\">\n            <span\n                className=\"redeemable-info-header--highlight\"\n                data-test=\"coupon-amount\"\n            >\n                { coupon.displayName }\n            </span>\n\n            { ' ' }\n\n            <TranslatedString id=\"redeemable.coupon_text\" />\n        </span>\n\n        <span className=\"redeemable-info-subHeader\" data-test=\"coupon-code\">\n            { coupon.code }\n        </span>\n    </div>\n);\n\nexport default memo(AppliedCoupon);\n","import { GiftCertificate } from '@bigcommerce/checkout-sdk';\nimport React, { memo, FunctionComponent } from 'react';\n\nimport { ShopperCurrency } from '../currency';\nimport { TranslatedString } from '../locale';\n\nexport interface AppliedGiftCertificateProps {\n    giftCertificate: GiftCertificate;\n}\n\nconst AppliedGiftCertificate: FunctionComponent<AppliedGiftCertificateProps> = ({ giftCertificate }) => (\n    <div\n        className=\"redeemable-column redeemable-info\"\n        data-test=\"redeemable-item--giftCertificate\"\n    >\n        <span className=\"redeemable-info-header\">\n            <span className=\"redeemable-info-header--highlight\" data-test=\"giftCertificate-amount\">\n                <ShopperCurrency amount={ giftCertificate.used } />\n            </span>\n\n            { ' ' }\n\n            <TranslatedString id=\"redeemable.gift_certificate_text\" />\n        </span>\n\n        <span className=\"redeemable-info-subHeader\">\n            { giftCertificate.remaining > 0 && <span className=\"redeemable-info-subHeader--remaining\">\n                <TranslatedString id=\"redeemable.gift_certificate_remaining_text\" />\n\n                { ' ' }\n\n                <span data-test=\"giftCertificate-remaining\">\n                    <ShopperCurrency amount={ giftCertificate.remaining } />\n                </span>\n            </span> }\n\n            <span data-test=\"giftCertificate-code\">\n                { giftCertificate.code }\n            </span>\n        </span>\n    </div>\n);\n\nexport default memo(AppliedGiftCertificate);\n","import React, { FunctionComponent } from 'react';\n\nimport withIconContainer from './withIconContainer';\n\nconst IconRemove: FunctionComponent = () => (\n    <svg height=\"24\" viewBox=\"0 0 24 24\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\" />\n    </svg>\n);\n\nexport default withIconContainer(IconRemove);\n","import classNames from 'classnames';\nimport React, { FunctionComponent } from 'react';\n\nimport { TranslatedString } from '../locale';\nimport { IconRemove } from '../ui/icon';\n\nimport './AppliedRedeemable.scss';\n\nexport interface AppliedRedeemableProps {\n    isRemoving: boolean;\n    onRemove(): void;\n}\n\nconst AppliedRedeemable: FunctionComponent<AppliedRedeemableProps> = ({\n    children,\n    isRemoving,\n    onRemove,\n}) => (\n    <div className=\"form-checklist-header\">\n        <div className=\"form-checklist-checkbox optimizedCheckout-form-checklist-checkbox\">\n            <span className=\"is-srOnly\">\n                <TranslatedString id=\"redeemable.applied_text\" />\n            </span>\n        </div>\n\n        <div className=\"form-label form-label-redeemable\">\n            <div className=\"redeemable\">\n                { children }\n                <div className=\"redeemable-column redeemable-actions\">\n                    <button\n                        className={ classNames(\n                            'redeemable-remove',\n                            { 'is-loading': isRemoving }\n                        ) }\n                        data-test=\"redeemable-remove\"\n                        disabled={ isRemoving }\n                        onClick={ onRemove }\n                        type=\"button\"\n                    >\n                        <IconRemove />\n                    </button>\n                </div>\n            </div>\n        </div>\n    </div>\n);\n\nexport default AppliedRedeemable;\n","import { Coupon, GiftCertificate } from '@bigcommerce/checkout-sdk';\nimport React, { memo, useCallback, FunctionComponent } from 'react';\n\nimport { AppliedCoupon } from '../coupon';\nimport { AppliedGiftCertificate } from '../giftCertificate';\n\nimport AppliedRedeemable from './AppliedRedeemable';\n\ninterface AppliedCouponProps {\n    coupon: Coupon;\n    isRemoving?: boolean;\n    onRemoved(code: string): void;\n}\n\nconst AppliedCouponChecklistItem: FunctionComponent<AppliedCouponProps> = ({\n    coupon,\n    onRemoved,\n    isRemoving = false,\n}) => {\n    const handleRemove = useCallback(() => {\n        onRemoved(coupon.code);\n    }, [\n        coupon,\n        onRemoved,\n    ]);\n\n    return (\n        <li className=\"form-checklist-item optimizedCheckout-form-checklist-item\">\n            <AppliedRedeemable\n                isRemoving={ isRemoving }\n                onRemove={ handleRemove }\n            >\n                <AppliedCoupon coupon={ coupon } />\n            </AppliedRedeemable>\n        </li>\n    );\n};\n\ninterface AppliedGiftCertificateProps {\n    giftCertificate: GiftCertificate;\n    isRemoving?: boolean;\n    onRemoved(code: string): void;\n}\n\nconst AppliedGiftCertificateChecklistItem: FunctionComponent<AppliedGiftCertificateProps> = ({\n    giftCertificate,\n    onRemoved,\n    isRemoving = false,\n}) => {\n    const handleRemove = useCallback(() => {\n        onRemoved(giftCertificate.code);\n    }, [\n        giftCertificate,\n        onRemoved,\n    ]);\n\n    return (\n        <li className=\"form-checklist-item optimizedCheckout-form-checklist-item\">\n            <AppliedRedeemable\n                isRemoving={ isRemoving }\n                onRemove={ handleRemove }\n            >\n                <AppliedGiftCertificate giftCertificate={ giftCertificate } />\n            </AppliedRedeemable>\n        </li>\n    );\n};\n\nexport interface AppliedRedeemablesProps {\n    coupons?: Coupon[];\n    giftCertificates?: GiftCertificate[];\n    isRemovingGiftCertificate?: boolean;\n    isRemovingCoupon?: boolean;\n    onRemovedCoupon(code: string): void;\n    onRemovedGiftCertificate(code: string): void;\n}\n\nconst AppliedRedeemables: FunctionComponent<AppliedRedeemablesProps> = ({\n    coupons = [],\n    giftCertificates = [],\n    isRemovingCoupon = false,\n    isRemovingGiftCertificate = false,\n    onRemovedCoupon,\n    onRemovedGiftCertificate,\n}) => {\n    if (!coupons.length && !giftCertificates.length) {\n        return null;\n    }\n\n    return (\n        <ul className=\"form-checklist optimizedCheckout-form-checklist\" data-test=\"redeemables-list\">\n            { coupons.map(coupon => (\n                <AppliedCouponChecklistItem\n                    coupon={ coupon }\n                    isRemoving={ isRemovingCoupon }\n                    key={ coupon.code }\n                    onRemoved={ onRemovedCoupon }\n                />\n            )) }\n\n            { giftCertificates.map(giftCertificate => (\n                <AppliedGiftCertificateChecklistItem\n                    giftCertificate={ giftCertificate }\n                    isRemoving={ isRemovingGiftCertificate }\n                    key={ giftCertificate.code }\n                    onRemoved={ onRemovedGiftCertificate }\n                />\n            )) }\n        </ul>\n    );\n};\n\nexport default memo(AppliedRedeemables);\n","import { CheckoutSelectors, RequestError } from '@bigcommerce/checkout-sdk';\nimport { memoizeOne } from '@bigcommerce/memoize';\nimport { withFormik, FieldProps, FormikProps } from 'formik';\nimport { noop } from 'lodash';\nimport React, { memo, useCallback, Fragment, FunctionComponent, KeyboardEvent } from 'react';\nimport { object, string } from 'yup';\n\nimport { preventDefault } from '../common/dom';\nimport { withLanguage, TranslatedString, WithLanguageProps } from '../locale';\nimport { Alert, AlertType } from '../ui/alert';\nimport { Button, ButtonVariant } from '../ui/button';\nimport { FormContextType, FormField, FormProvider, Label, TextInput } from '../ui/form';\nimport { Toggle } from '../ui/toggle';\n\nimport AppliedRedeemables, { AppliedRedeemablesProps } from './AppliedRedeemables';\n\nexport interface RedeemableFormValues {\n    redeemableCode: string;\n}\n\nexport type ReedemableChildrenProps = Pick<RedeemableProps,\n    'onRemovedCoupon' |\n    'onRemovedGiftCertificate' |\n    'isRemovingGiftCertificate' |\n    'isRemovingCoupon' |\n    'coupons' |\n    'giftCertificates'\n>;\n\nexport type RedeemableProps = {\n    appliedRedeemableError?: RequestError;\n    isApplyingRedeemable?: boolean;\n    isRemovingRedeemable?: boolean;\n    removedRedeemableError?: RequestError;\n    showAppliedRedeemables?: boolean;\n    shouldCollapseCouponCode?: boolean;\n    applyCoupon(code: string): Promise<CheckoutSelectors>;\n    applyGiftCertificate(code: string): Promise<CheckoutSelectors>;\n    clearError(error: Error): void;\n} & AppliedRedeemablesProps;\n\nconst Redeemable: FunctionComponent<RedeemableProps & WithLanguageProps & FormikProps<RedeemableFormValues>> = ({\n    shouldCollapseCouponCode,\n    showAppliedRedeemables,\n    ...formProps\n}) => (\n    <Toggle openByDefault={ !shouldCollapseCouponCode }>\n        { ({ toggle, isOpen }) => (\n            <Fragment>\n                { shouldCollapseCouponCode && <a\n                    className=\"redeemable-label\"\n                    data-test=\"redeemable-label\"\n                    href=\"#\"\n                    onClick={ preventDefault(toggle) }\n                >\n                    <TranslatedString id=\"redeemable.toggle_action\" />\n                </a> }\n                { !shouldCollapseCouponCode && <div className=\"redeemable-label\">\n                    <TranslatedString id=\"redeemable.toggle_action\" />\n                </div> }\n                { (isOpen || !shouldCollapseCouponCode) && <div data-test=\"redeemable-collapsable\">\n                    <RedeemableForm { ...formProps } />\n                    { showAppliedRedeemables &&\n                        <AppliedRedeemables { ...formProps } /> }\n                </div> }\n            </Fragment>\n        ) }\n    </Toggle>\n);\n\nconst RedeemableForm: FunctionComponent<Partial<RedeemableProps> & FormikProps<RedeemableFormValues> & WithLanguageProps> = ({\n    appliedRedeemableError,\n    isApplyingRedeemable,\n    clearError = noop,\n    submitForm,\n    language,\n}) => {\n    const handleKeyDown = useCallback(memoizeOne((setSubmitted: FormContextType['setSubmitted']) => (\n        (event: KeyboardEvent) => {\n            if (appliedRedeemableError) {\n                clearError(appliedRedeemableError);\n            }\n\n            // note: to prevent submitting main form, we manually intercept\n            // the enter key event and submit the \"subform\".\n            if (event.keyCode === 13) {\n                setSubmitted(true);\n                submitForm();\n                event.preventDefault();\n            }\n        }\n    )), [\n        appliedRedeemableError,\n        clearError,\n        submitForm,\n    ]);\n\n    const handleSubmit = useCallback(memoizeOne((setSubmitted: FormContextType['setSubmitted']) => (\n        () => {\n            setSubmitted(true);\n            submitForm();\n        }\n    )), []);\n\n    const renderLabel = useCallback((name: string) => (\n        <Label hidden htmlFor={ name }>\n            <TranslatedString id=\"redeemable.code_label\" />\n        </Label>\n    ), []);\n\n    const renderErrorMessage = useCallback((errorCode: string) => {\n        switch (errorCode) {\n        case 'min_purchase':\n            return <TranslatedString id=\"redeemable.coupon_min_order_total\" />;\n        case 'not_applicable':\n            return <TranslatedString id=\"redeemable.coupon_location_error\" />;\n        default:\n            return <TranslatedString id=\"redeemable.code_invalid_error\" />;\n        }\n    }, []);\n\n    const renderInput = useCallback((setSubmitted: FormContextType['setSubmitted']) => ({ field }: FieldProps) => (\n        <Fragment>\n            { appliedRedeemableError && appliedRedeemableError.errors && appliedRedeemableError.errors[0] &&\n                <Alert type={ AlertType.Error }>\n                    { renderErrorMessage(appliedRedeemableError.errors[0].code) }\n                </Alert> }\n\n            <div className=\"form-prefixPostfix\">\n                <TextInput\n                    { ...field }\n                    aria-label={ language.translate('redeemable.code_label') }\n                    className=\"form-input optimizedCheckout-form-input\"\n                    onKeyDown={ handleKeyDown(setSubmitted) }\n                    testId=\"redeemableEntry-input\"\n                />\n\n                <Button\n                    className=\"form-prefixPostfix-button--postfix\"\n                    id=\"applyRedeemableButton\"\n                    isLoading={ isApplyingRedeemable }\n                    onClick={ handleSubmit(setSubmitted) }\n                    testId=\"redeemableEntry-submit\"\n                    variant={ ButtonVariant.Secondary }\n                >\n                    <TranslatedString id=\"redeemable.apply_action\" />\n                </Button>\n            </div>\n        </Fragment>\n    ), [appliedRedeemableError, handleKeyDown, handleSubmit, isApplyingRedeemable, language, renderErrorMessage]);\n\n    const renderContent = useCallback(memoizeOne(({ setSubmitted }: FormContextType) => (\n        <FormField\n            input={ renderInput(setSubmitted) }\n            label={ renderLabel }\n            name=\"redeemableCode\"\n        />\n    )), [\n        renderLabel,\n        renderInput,\n    ]);\n\n    return <fieldset className=\"form-fieldset redeemable-entry\">\n        <FormProvider>\n            { renderContent }\n        </FormProvider>\n    </fieldset>;\n};\n\nexport default withLanguage(withFormik<RedeemableProps & WithLanguageProps, RedeemableFormValues>({\n    mapPropsToValues() {\n        return {\n            redeemableCode: '',\n        };\n    },\n\n    async handleSubmit({ redeemableCode }, { props: { applyCoupon, applyGiftCertificate, clearError } }) {\n        const code = redeemableCode.trim();\n\n        try {\n            await applyGiftCertificate(code);\n        } catch (error) {\n            clearError(error);\n            applyCoupon(code);\n        }\n    },\n\n    validationSchema({ language }: RedeemableProps & WithLanguageProps) {\n        return object({\n            redeemableCode: string()\n                .required(language.translate('redeemable.code_required_error')),\n        });\n    },\n})(memo(Redeemable)));\n","import { CheckoutContextProps } from '../checkout';\n\nimport mapToRedeemableProps from './mapToRedeemableProps';\nimport { WithCheckoutCartSummaryProps } from './CartSummary';\n\nexport default function mapToCartSummaryProps(\n    context: CheckoutContextProps\n): WithCheckoutCartSummaryProps | null {\n    const {\n        checkoutState: {\n            data: { getConfig, getCustomer, getCheckout },\n        },\n    } = context;\n\n    const checkout = getCheckout();\n    const config = getConfig();\n    const customer = getCustomer();\n    const redeemableProps = mapToRedeemableProps(context);\n\n    if (!checkout || !config || !redeemableProps || !customer) {\n        return null;\n    }\n\n    const { isStoreCreditApplied, grandTotal } = checkout;\n    const { storeCredit } = customer;\n\n    return {\n        checkout,\n        shopperCurrency: config.shopperCurrency,\n        cartUrl: config.links.cartLink,\n        storeCurrency: config.currency,\n        storeCreditAmount: isStoreCreditApplied ? Math.min(grandTotal, storeCredit) : undefined,\n        ...redeemableProps,\n    };\n}\n","import { CheckoutContextProps } from '../checkout';\nimport { EMPTY_ARRAY } from '../common/utility';\n\nimport { RedeemableProps } from './Redeemable';\n\nexport default function mapToRedeemableProps(\n    context: CheckoutContextProps\n): RedeemableProps | null {\n    const {\n        checkoutService,\n        checkoutState: {\n            data: {\n                getConfig,\n                getCoupons,\n                getGiftCertificates,\n            },\n            statuses: {\n                isApplyingCoupon,\n                isApplyingGiftCertificate,\n                isRemovingCoupon,\n                isRemovingGiftCertificate,\n            },\n            errors: {\n                getApplyCouponError,\n                getApplyGiftCertificateError,\n                getRemoveCouponError,\n                getRemoveGiftCertificateError,\n            },\n        },\n    } = context;\n\n    const config = getConfig();\n\n    if (!config) {\n        return null;\n    }\n\n    return {\n        appliedRedeemableError: getApplyCouponError() || getApplyGiftCertificateError(),\n        applyCoupon: checkoutService.applyCoupon,\n        applyGiftCertificate: checkoutService.applyGiftCertificate,\n        clearError: checkoutService.clearError,\n        coupons: getCoupons() || EMPTY_ARRAY,\n        giftCertificates: getGiftCertificates() || EMPTY_ARRAY,\n        isApplyingRedeemable: (isApplyingCoupon() || isApplyingGiftCertificate()),\n        isRemovingCoupon: isRemovingCoupon(),\n        isRemovingGiftCertificate: isRemovingGiftCertificate(),\n        onRemovedCoupon: checkoutService.removeCoupon,\n        onRemovedGiftCertificate: checkoutService.removeGiftCertificate,\n        removedRedeemableError: (getRemoveCouponError() || getRemoveGiftCertificateError()),\n        shouldCollapseCouponCode: config.checkoutSettings.isCouponCodeCollapsed,\n    };\n}\n","import React, { ComponentType, FunctionComponent } from 'react';\n\nimport { OrderSummaryProps, OrderSummarySubtotalsProps } from '../order';\n\nimport mapToOrderSummarySubtotalsProps from './mapToOrderSummarySubtotalsProps';\nimport { WithCheckoutCartSummaryProps } from './CartSummary';\nimport Redeemable from './Redeemable';\n\nexport default function withRedeemable(\n    OriginalComponent: ComponentType<OrderSummaryProps & OrderSummarySubtotalsProps>\n): FunctionComponent<\n    WithCheckoutCartSummaryProps &\n    { headerLink?: any }\n> {\n    return props => {\n        const {\n            checkout,\n            storeCurrency,\n            shopperCurrency,\n            headerLink,\n            onRemovedCoupon,\n            onRemovedGiftCertificate,\n            storeCreditAmount,\n            ...redeemableProps\n        } = props;\n\n        return (\n            <OriginalComponent\n                { ...mapToOrderSummarySubtotalsProps(checkout) }\n                additionalLineItems={\n                    <Redeemable { ...{\n                        ...redeemableProps,\n                        onRemovedCoupon,\n                        onRemovedGiftCertificate,\n                    } }\n                    />\n                }\n                headerLink={ headerLink }\n                lineItems={ checkout.cart.lineItems }\n                onRemovedCoupon={ onRemovedCoupon }\n                onRemovedGiftCertificate={ onRemovedGiftCertificate }\n                shopperCurrency={ shopperCurrency }\n                storeCreditAmount={ storeCreditAmount }\n                storeCurrency={ storeCurrency }\n                total={ checkout.outstandingBalance }\n            />\n        );\n    };\n}\n","import { Checkout } from '@bigcommerce/checkout-sdk';\n\nimport { OrderSummarySubtotalsProps } from '../order';\nimport { hasSelectedShippingOptions } from '../shipping';\n\nexport default function mapToOrderSummarySubtotalsProps({\n    subtotal,\n    cart: { discountAmount },\n    giftCertificates,\n    consignments,\n    handlingCostTotal,\n    shippingCostBeforeDiscount,\n    giftWrappingCostTotal,\n    coupons,\n    taxes,\n}: Checkout): OrderSummarySubtotalsProps {\n    return {\n        subtotalAmount: subtotal,\n        discountAmount,\n        giftCertificates,\n        giftWrappingAmount: giftWrappingCostTotal,\n        shippingAmount: hasSelectedShippingOptions(consignments) ?\n            shippingCostBeforeDiscount :\n            undefined,\n        handlingAmount: handlingCostTotal,\n        coupons,\n        taxes,\n    };\n}\n","import React, { FunctionComponent } from 'react';\n\nimport { TranslatedString } from '../locale';\n\nconst OrderSummaryHeader: FunctionComponent = ({ children }) => (\n    <header className=\"cart-header\">\n        <h3 className=\"cart-title optimizedCheckout-headingSecondary\">\n            <TranslatedString id=\"cart.cart_heading\" />\n        </h3>\n       { children }\n    </header>\n);\n\nexport default OrderSummaryHeader;\n","import { LineItemMap, ShopperCurrency, StoreCurrency } from '@bigcommerce/checkout-sdk';\nimport React, { useMemo, FunctionComponent, ReactNode } from 'react';\n\nimport removeBundledItems from './removeBundledItems';\nimport OrderSummaryHeader from './OrderSummaryHeader';\nimport OrderSummaryItems from './OrderSummaryItems';\nimport OrderSummarySection from './OrderSummarySection';\nimport OrderSummarySubtotals, { OrderSummarySubtotalsProps } from './OrderSummarySubtotals';\nimport OrderSummaryTotal from './OrderSummaryTotal';\n\nexport interface OrderSummaryProps {\n    lineItems: LineItemMap;\n    total: number;\n    headerLink: ReactNode;\n    storeCurrency: StoreCurrency;\n    shopperCurrency: ShopperCurrency;\n    additionalLineItems?: ReactNode;\n}\n\nconst OrderSummary: FunctionComponent<OrderSummaryProps & OrderSummarySubtotalsProps> = ({\n    storeCurrency,\n    shopperCurrency,\n    headerLink,\n    additionalLineItems,\n    lineItems,\n    total,\n    ...orderSummarySubtotalsProps\n}) => {\n    const nonBundledLineItems = useMemo(() => (\n        removeBundledItems(lineItems)\n    ), [lineItems]);\n\n    return <article className=\"cart optimizedCheckout-orderSummary\" data-test=\"cart\">\n        <OrderSummaryHeader>\n            { headerLink }\n        </OrderSummaryHeader>\n\n        <OrderSummarySection>\n            <OrderSummaryItems items={ nonBundledLineItems } />\n        </OrderSummarySection>\n\n        <OrderSummarySection>\n            <OrderSummarySubtotals\n                { ...orderSummarySubtotalsProps }\n            />\n            { additionalLineItems }\n        </OrderSummarySection>\n\n        <OrderSummarySection>\n            <OrderSummaryTotal\n                orderAmount={ total }\n                shopperCurrencyCode={ shopperCurrency.code }\n                storeCurrencyCode={ storeCurrency.code }\n            />\n        </OrderSummarySection>\n    </article>;\n};\n\nexport default OrderSummary;\n","import { LineItemMap } from '@bigcommerce/checkout-sdk';\n\nexport default function removeBundledItems(lineItems: LineItemMap): LineItemMap {\n    return {\n        ...lineItems,\n        physicalItems: lineItems.physicalItems.filter(item => (typeof item.parentId !== 'string')),\n        digitalItems: lineItems.digitalItems.filter(item => (typeof item.parentId !== 'string')),\n    };\n}\n"],"names":["cartUrl","props","headerLink","url","memo","className","href","id","target","coupon","displayName","TranslatedString","code","giftCertificate","ShopperCurrency","amount","used","remaining","height","viewBox","width","xmlns","d","children","isRemoving","onRemove","disabled","onClick","type","AppliedCouponChecklistItem","onRemoved","handleRemove","useCallback","AppliedGiftCertificateChecklistItem","coupons","giftCertificates","isRemovingCoupon","isRemovingGiftCertificate","onRemovedCoupon","onRemovedGiftCertificate","length","map","key","RedeemableForm","appliedRedeemableError","isApplyingRedeemable","clearError","noop","submitForm","language","handleKeyDown","setSubmitted","event","keyCode","preventDefault","handleSubmit","renderLabel","name","Label","hidden","htmlFor","renderErrorMessage","errorCode","renderInput","field","Fragment","errors","Alert","TextInput","translate","onKeyDown","testId","Button","isLoading","variant","renderContent","FormField","input","label","FormProvider","withLanguage","withFormik","mapPropsToValues","redeemableCode","applyCoupon","applyGiftCertificate","trim","validationSchema","required","shouldCollapseCouponCode","showAppliedRedeemables","formProps","Toggle","openByDefault","toggle","isOpen","mapToCartSummaryProps","context","getConfig","getCustomer","checkout","getCheckout","config","customer","redeemableProps","isStoreCreditApplied","grandTotal","storeCredit","shopperCurrency","links","cartLink","storeCurrency","currency","storeCreditAmount","Math","min","undefined","mapToRedeemableProps","checkoutService","data","getCoupons","getGiftCertificates","statuses","isApplyingCoupon","isApplyingGiftCertificate","getApplyCouponError","getApplyGiftCertificateError","getRemoveCouponError","getRemoveGiftCertificateError","removeCoupon","removeGiftCertificate","removedRedeemableError","checkoutSettings","isCouponCodeCollapsed","withRedeemable","OriginalComponent","subtotal","discountAmount","consignments","handlingCostTotal","shippingCostBeforeDiscount","giftWrappingCostTotal","taxes","subtotalAmount","giftWrappingAmount","shippingAmount","hasSelectedShippingOptions","handlingAmount","additionalLineItems","Redeemable","lineItems","cart","total","outstandingBalance","orderSummarySubtotalsProps","nonBundledLineItems","useMemo","physicalItems","filter","item","parentId","digitalItems","OrderSummarySection","OrderSummaryItems","items","OrderSummarySubtotals","OrderSummaryTotal","orderAmount","shopperCurrencyCode","storeCurrencyCode"],"sourceRoot":""}