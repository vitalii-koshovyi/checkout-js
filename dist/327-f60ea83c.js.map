{"version":3,"file":"327-f60ea83c.js","mappings":"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","sources":["webpack://checkout/../src/browser-support.ts","webpack://checkout/../src/create-script-loader.ts","webpack://checkout/../src/create-stylesheet-loader.ts","webpack://checkout/../src/get-script-loader.ts","webpack://checkout/../src/get-stylesheet-loader.ts","webpack://checkout/../src/index.ts","webpack://checkout/../src/script-loader.ts","webpack://checkout/../src/stylesheet-loader.ts","webpack://checkout/./node_modules/@bigcommerce/script-loader/node_modules/@bigcommerce/request-sender/lib/cache.js","webpack://checkout/./node_modules/@bigcommerce/script-loader/node_modules/@bigcommerce/request-sender/lib/create-request-sender.js","webpack://checkout/./node_modules/@bigcommerce/script-loader/node_modules/@bigcommerce/request-sender/lib/create-timeout.js","webpack://checkout/./node_modules/@bigcommerce/script-loader/node_modules/@bigcommerce/request-sender/lib/index.js","webpack://checkout/./node_modules/@bigcommerce/script-loader/node_modules/@bigcommerce/request-sender/lib/is-promise.js","webpack://checkout/./node_modules/@bigcommerce/script-loader/node_modules/@bigcommerce/request-sender/lib/payload-transformer.js","webpack://checkout/./node_modules/@bigcommerce/script-loader/node_modules/@bigcommerce/request-sender/lib/request-factory.js","webpack://checkout/./node_modules/@bigcommerce/script-loader/node_modules/@bigcommerce/request-sender/lib/request-sender.js","webpack://checkout/./node_modules/@bigcommerce/script-loader/node_modules/@bigcommerce/request-sender/lib/timeout.js","webpack://checkout/./node_modules/@bigcommerce/script-loader/node_modules/@bigcommerce/request-sender/lib/to-form-url-encoded.js","webpack://checkout/./node_modules/@bigcommerce/script-loader/node_modules/query-string/index.js"],"sourcesContent":["export default class BrowserSupport {\n    canSupportRel(rel: string): boolean {\n        const link = document.createElement('link');\n\n        return !!(\n            link.relList &&\n            link.relList.supports &&\n            link.relList.supports(rel)\n        );\n    }\n}\n","import { createRequestSender } from '@bigcommerce/request-sender';\n\nimport BrowserSupport from './browser-support';\nimport ScriptLoader from './script-loader';\n\nexport default function createScriptLoader(): ScriptLoader {\n    return new ScriptLoader(\n        new BrowserSupport(),\n        createRequestSender()\n    );\n}\n","import { createRequestSender } from '@bigcommerce/request-sender';\n\nimport BrowserSupport from './browser-support';\nimport StylesheetLoader from './stylesheet-loader';\n\nexport default function createStylesheetLoader(): StylesheetLoader {\n    return new StylesheetLoader(\n        new BrowserSupport(),\n        createRequestSender()\n    );\n}\n","import createScriptLoader from './create-script-loader';\nimport ScriptLoader from './script-loader';\n\nlet instance: ScriptLoader;\n\nexport default function getScriptLoader(): ScriptLoader {\n    if (!instance) {\n        instance = createScriptLoader();\n    }\n\n    return instance;\n}\n","import createStylesheetLoader from './create-stylesheet-loader';\nimport StylesheetLoader from './stylesheet-loader';\n\nlet instance: StylesheetLoader;\n\nexport default function getStylesheetLoader(): StylesheetLoader {\n    if (!instance) {\n        instance = createStylesheetLoader();\n    }\n\n    return instance;\n}\n","export { default as ScriptLoader, LoadScriptOptions, PreloadScriptOptions } from './script-loader';\nexport { default as createScriptLoader } from './create-script-loader';\nexport { default as getScriptLoader } from './get-script-loader';\n\nexport { default as StylesheetLoader, LoadStylesheetOptions, PreloadStylesheetOptions } from './stylesheet-loader';\nexport { default as createStylesheetLoader } from './create-stylesheet-loader';\nexport { default as getStylesheetLoader } from './get-stylesheet-loader';\n","import { RequestSender } from '@bigcommerce/request-sender';\n\nimport BrowserSupport from './browser-support';\n\nexport interface LoadScriptOptions {\n    async: boolean;\n    attributes: ScriptAttributes;\n}\n\nexport interface PreloadScriptOptions {\n    prefetch: boolean;\n}\n\nexport interface ScriptAttributes {\n    [key: string]: string;\n}\n\nexport default class ScriptLoader {\n    private _scripts: { [key: string]: Promise<void> } = {};\n    private _preloadedScripts: { [key: string]: Promise<void> } = {};\n\n    /**\n     * @internal\n     */\n    constructor(\n        private _browserSupport: BrowserSupport,\n        private _requestSender: RequestSender\n    ) {}\n\n    loadScript(src: string, options?: LoadScriptOptions): Promise<void> {\n        if (!this._scripts[src]) {\n            this._scripts[src] = new Promise((resolve, reject) => {\n                const script = document.createElement('script') as LegacyHTMLScriptElement;\n                const { async = false, attributes = {} } = options || {};\n\n                Object.keys(attributes)\n                    .forEach(key => {\n                        script.setAttribute(key, attributes[key]);\n                    });\n\n                script.onload = () => resolve();\n                script.onreadystatechange = () => resolve();\n                script.onerror = event => {\n                    delete this._scripts[src];\n                    reject(event);\n                };\n                script.async = async;\n                script.src = src;\n\n                document.body.appendChild(script);\n            });\n        }\n\n        return this._scripts[src];\n    }\n\n    loadScripts(urls: string[], options?: LoadScriptOptions): Promise<void> {\n        return Promise.all(urls.map(url => this.loadScript(url, options)))\n            .then(() => undefined);\n    }\n\n    preloadScript(url: string, options?: PreloadScriptOptions): Promise<void> {\n        if (!this._preloadedScripts[url]) {\n            this._preloadedScripts[url] = new Promise((resolve, reject) => {\n                const { prefetch = false } = options || {};\n                const rel = prefetch ? 'prefetch' : 'preload';\n\n                if (this._browserSupport.canSupportRel(rel)) {\n                    const preloadedScript = document.createElement('link');\n\n                    preloadedScript.as = 'script';\n                    preloadedScript.rel = rel;\n                    preloadedScript.href = url;\n\n                    preloadedScript.onload = () => {\n                        resolve();\n                    };\n\n                    preloadedScript.onerror = () => {\n                        delete this._preloadedScripts[url];\n                        reject();\n                    };\n\n                    document.head.appendChild(preloadedScript);\n                } else {\n                    this._requestSender.get(url, {\n                        credentials: false,\n                        headers: { Accept: 'application/javascript' },\n                    })\n                        .then(() => resolve())\n                        .catch(reject);\n                }\n            });\n        }\n\n        return this._preloadedScripts[url];\n    }\n\n    preloadScripts(urls: string[], options?: PreloadScriptOptions): Promise<void> {\n        return Promise.all(urls.map(url => this.preloadScript(url, options)))\n            .then(() => undefined);\n    }\n}\n\ninterface LegacyHTMLScriptElement extends HTMLScriptElement {\n    // `onreadystatechange` is needed to support legacy IE\n    onreadystatechange(this: HTMLElement, event: Event): any;\n}\n","import { RequestSender } from '@bigcommerce/request-sender';\n\nimport BrowserSupport from './browser-support';\n\nexport interface LoadStylesheetOptions {\n    prepend: boolean;\n    attributes?: StylesheetAttributes;\n}\n\nexport interface PreloadStylesheetOptions {\n    prefetch: boolean;\n}\n\nexport interface StylesheetAttributes {\n    [key: string]: string;\n}\n\nexport default class StylesheetLoader {\n    private _stylesheets: { [key: string]: Promise<void> } = {};\n    private _preloadedStylesheets: { [key: string]: Promise<void> } = {};\n\n    /**\n     * @internal\n     */\n    constructor(\n        private _browserSupport: BrowserSupport,\n        private _requestSender: RequestSender\n    ) {}\n\n    loadStylesheet(src: string, options?: LoadStylesheetOptions): Promise<void> {\n        if (!this._stylesheets[src]) {\n            this._stylesheets[src] = new Promise((resolve, reject) => {\n                const stylesheet = document.createElement('link');\n                const { prepend = false, attributes = {} } = options || {};\n\n                Object.keys(attributes)\n                    .forEach(key => {\n                        stylesheet.setAttribute(key, attributes[key]);\n                    });\n\n                stylesheet.onload = () => resolve();\n                stylesheet.onerror = event => {\n                    delete this._stylesheets[src];\n                    reject(event);\n                };\n                stylesheet.rel = 'stylesheet';\n                stylesheet.href = src;\n\n                if (prepend && document.head.children[0]) {\n                    document.head.insertBefore(stylesheet, document.head.children[0]);\n                } else {\n                    document.head.appendChild(stylesheet);\n                }\n            });\n        }\n\n        return this._stylesheets[src];\n    }\n\n    loadStylesheets(urls: string[], options?: LoadStylesheetOptions): Promise<void> {\n        return Promise.all(urls.map(url => this.loadStylesheet(url, options)))\n            .then(() => undefined);\n    }\n\n    preloadStylesheet(url: string, options?: PreloadStylesheetOptions): Promise<void> {\n        if (!this._preloadedStylesheets[url]) {\n            this._preloadedStylesheets[url] = new Promise((resolve, reject) => {\n                const { prefetch = false } = options || {};\n                const rel = prefetch ? 'prefetch' : 'preload';\n\n                if (this._browserSupport.canSupportRel(rel)) {\n                    const preloadedStylesheet = document.createElement('link');\n\n                    preloadedStylesheet.as = 'style';\n                    preloadedStylesheet.rel = prefetch ? 'prefetch' : 'preload';\n                    preloadedStylesheet.href = url;\n\n                    preloadedStylesheet.onload = () => {\n                        resolve();\n                    };\n\n                    preloadedStylesheet.onerror = event => {\n                        delete this._preloadedStylesheets[url];\n                        reject(event);\n                    };\n\n                    document.head.appendChild(preloadedStylesheet);\n                } else {\n                    this._requestSender.get(url, {\n                        credentials: false,\n                        headers: { Accept: 'text/css' },\n                    })\n                        .then(() => resolve())\n                        .catch(reject);\n                }\n            });\n        }\n\n        return this._preloadedStylesheets[url];\n    }\n\n    preloadStylesheets(urls: string[], options?: PreloadStylesheetOptions): Promise<void> {\n        return Promise.all(urls.map(url => this.preloadStylesheet(url, options)))\n            .then(() => undefined);\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar queryString = tslib_1.__importStar(require(\"query-string\"));\nvar DefaultCache = (function () {\n    function DefaultCache() {\n        this._cache = {};\n    }\n    DefaultCache.prototype.read = function (url, options) {\n        var cacheKey = this.getKey(url, options.params);\n        return this._cache[cacheKey] || null;\n    };\n    DefaultCache.prototype.write = function (url, options, response) {\n        var cacheKey = this.getKey(url, options.params);\n        this._cache[cacheKey] = response;\n    };\n    DefaultCache.prototype.getKey = function (url, params) {\n        if (params === void 0) { params = {}; }\n        if (Object.keys(params).length === 0) {\n            return url;\n        }\n        return url + \"?\" + queryString.stringify(params);\n    };\n    return DefaultCache;\n}());\nexports.DefaultCache = DefaultCache;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar cookie = tslib_1.__importStar(require(\"js-cookie\"));\nvar payload_transformer_1 = tslib_1.__importDefault(require(\"./payload-transformer\"));\nvar request_factory_1 = tslib_1.__importDefault(require(\"./request-factory\"));\nvar request_sender_1 = tslib_1.__importDefault(require(\"./request-sender\"));\nfunction createRequestSender(options) {\n    return new request_sender_1.default(new request_factory_1.default(), new payload_transformer_1.default(), cookie, options);\n}\nexports.default = createRequestSender;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar timeout_1 = tslib_1.__importDefault(require(\"./timeout\"));\nfunction createTimeout(delay) {\n    return new timeout_1.default(delay);\n}\nexports.default = createTimeout;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar create_request_sender_1 = require(\"./create-request-sender\");\nexports.createRequestSender = create_request_sender_1.default;\nvar create_timeout_1 = require(\"./create-timeout\");\nexports.createTimeout = create_timeout_1.default;\nvar request_sender_1 = require(\"./request-sender\");\nexports.RequestSender = request_sender_1.default;\nvar timeout_1 = require(\"./timeout\");\nexports.Timeout = timeout_1.default;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction isPromise(promise) {\n    return !!promise &&\n        (typeof promise === 'object' || typeof promise === 'function') &&\n        typeof promise.then === 'function';\n}\nexports.default = isPromise;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar to_form_url_encoded_1 = tslib_1.__importDefault(require(\"./to-form-url-encoded\"));\nvar JSON_CONTENT_TYPE_REGEXP = /application\\/(\\w+\\+)?json/;\nvar FORM_URLENCODED_CONTENT_TYPE_REGEXP = /application\\/x-www-form-urlencoded/;\nvar PayloadTransformer = (function () {\n    function PayloadTransformer() {\n    }\n    PayloadTransformer.prototype.toRequestBody = function (options) {\n        var contentType = options.headers ? this._getHeader(options.headers, 'Content-Type') : '';\n        if (options.body) {\n            if (JSON_CONTENT_TYPE_REGEXP.test(contentType)) {\n                return JSON.stringify(options.body);\n            }\n            if (FORM_URLENCODED_CONTENT_TYPE_REGEXP.test(contentType)) {\n                return to_form_url_encoded_1.default(options.body);\n            }\n        }\n        return options.body;\n    };\n    PayloadTransformer.prototype.toResponse = function (xhr) {\n        var headers = this._parseResponseHeaders(xhr.getAllResponseHeaders());\n        var body = this._parseResponseBody('response' in xhr ? xhr.response : xhr.responseText, headers);\n        return {\n            body: body,\n            headers: headers,\n            status: xhr.status,\n            statusText: xhr.statusText,\n        };\n    };\n    PayloadTransformer.prototype._parseResponseBody = function (body, headers) {\n        var contentType = this._getHeader(headers, 'Content-Type');\n        if (body && JSON_CONTENT_TYPE_REGEXP.test(contentType)) {\n            return JSON.parse(body);\n        }\n        return body;\n    };\n    PayloadTransformer.prototype._parseResponseHeaders = function (rawHeaders) {\n        var lines = rawHeaders ? rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ').split(/\\r?\\n/) : [];\n        return lines.reduce(function (headers, line) {\n            var _a;\n            var parts = line.split(':');\n            var key = (parts.shift() || '').trim();\n            if (!key) {\n                return headers;\n            }\n            return tslib_1.__assign(tslib_1.__assign({}, headers), (_a = {}, _a[key.toLowerCase()] = parts.join(':').trim(), _a));\n        }, {});\n    };\n    PayloadTransformer.prototype._getHeader = function (headers, key) {\n        if (!headers || !key) {\n            return '';\n        }\n        return headers[key] || headers[key.toLowerCase()] || '';\n    };\n    return PayloadTransformer;\n}());\nexports.default = PayloadTransformer;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar queryString = tslib_1.__importStar(require(\"query-string\"));\nvar RequestFactory = (function () {\n    function RequestFactory() {\n    }\n    RequestFactory.prototype.createRequest = function (url, options) {\n        var xhr = new XMLHttpRequest();\n        this._configureRequest(xhr, url, options);\n        return xhr;\n    };\n    RequestFactory.prototype._configureRequest = function (xhr, url, options) {\n        if (options === void 0) { options = {}; }\n        xhr.open(options.method || 'GET', this._formatUrl(url, options.params, options.encodeParams), true);\n        if (options.headers) {\n            this._configureRequestHeaders(xhr, options.headers);\n        }\n        if (typeof options.credentials === 'boolean') {\n            xhr.withCredentials = options.credentials;\n        }\n        if (typeof options.timeout === 'number') {\n            xhr.timeout = options.timeout;\n        }\n    };\n    RequestFactory.prototype._configureRequestHeaders = function (xhr, headers) {\n        Object.keys(headers)\n            .filter(function (key) { return headers[key] !== null; })\n            .forEach(function (key) {\n            xhr.setRequestHeader(key, headers[key]);\n        });\n    };\n    RequestFactory.prototype._formatUrl = function (url, params, encodeParams) {\n        if (encodeParams === void 0) { encodeParams = true; }\n        if (!params || Object.keys(params).length === 0) {\n            return url;\n        }\n        return url + \"?\" + queryString.stringify(params, { encode: encodeParams });\n    };\n    return RequestFactory;\n}());\nexports.default = RequestFactory;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar lodash_merge_1 = tslib_1.__importDefault(require(\"lodash.merge\"));\nvar cache_1 = require(\"./cache\");\nvar is_promise_1 = tslib_1.__importDefault(require(\"./is-promise\"));\nvar timeout_1 = tslib_1.__importDefault(require(\"./timeout\"));\nvar RequestSender = (function () {\n    function RequestSender(_requestFactory, _payloadTransformer, _cookie, _options) {\n        if (_options === void 0) { _options = {}; }\n        this._requestFactory = _requestFactory;\n        this._payloadTransformer = _payloadTransformer;\n        this._cookie = _cookie;\n        this._options = _options;\n        this._cache = this._options.cache || new cache_1.DefaultCache();\n    }\n    RequestSender.prototype.sendRequest = function (url, options) {\n        var _this = this;\n        var requestOptions = this._mergeDefaultOptions(url, options);\n        var cachedRequest = this._getCachedRequest(url, requestOptions);\n        if (cachedRequest) {\n            return Promise.resolve(cachedRequest);\n        }\n        var request = this._requestFactory.createRequest(this._prependHost(url), requestOptions);\n        return new Promise(function (resolve, reject) {\n            var requestHandler = function () {\n                var response = _this._payloadTransformer.toResponse(request);\n                if (response.status >= 200 && response.status < 300) {\n                    _this._cacheRequest(url, requestOptions, response);\n                    resolve(response);\n                }\n                else {\n                    reject(response);\n                }\n            };\n            request.onload = requestHandler;\n            request.onerror = requestHandler;\n            request.onabort = requestHandler;\n            request.ontimeout = requestHandler;\n            if (requestOptions.timeout instanceof timeout_1.default) {\n                requestOptions.timeout.onComplete(function () { return request.abort(); });\n                requestOptions.timeout.start();\n            }\n            if (is_promise_1.default(requestOptions.timeout)) {\n                requestOptions.timeout.then(function () { return request.abort(); });\n            }\n            request.send(_this._payloadTransformer.toRequestBody(requestOptions));\n        });\n    };\n    RequestSender.prototype.get = function (url, options) {\n        return this.sendRequest(url, tslib_1.__assign(tslib_1.__assign({}, options), { method: 'GET' }));\n    };\n    RequestSender.prototype.post = function (url, options) {\n        return this.sendRequest(url, tslib_1.__assign(tslib_1.__assign({}, options), { method: 'POST' }));\n    };\n    RequestSender.prototype.put = function (url, options) {\n        return this.sendRequest(url, tslib_1.__assign(tslib_1.__assign({}, options), { method: 'PUT' }));\n    };\n    RequestSender.prototype.patch = function (url, options) {\n        return this.sendRequest(url, tslib_1.__assign(tslib_1.__assign({}, options), { method: 'PATCH' }));\n    };\n    RequestSender.prototype.delete = function (url, options) {\n        return this.sendRequest(url, tslib_1.__assign(tslib_1.__assign({}, options), { method: 'DELETE' }));\n    };\n    RequestSender.prototype._mergeDefaultOptions = function (url, options) {\n        var defaultOptions = {\n            credentials: true,\n            encodeParams: true,\n            headers: {\n                Accept: 'application/json, text/plain, */*',\n            },\n            method: 'GET',\n        };\n        var csrfToken = this._cookie.get('XSRF-TOKEN');\n        if (csrfToken && defaultOptions.headers && !this._isAssetRequest(url, options)) {\n            defaultOptions.headers['X-XSRF-TOKEN'] = csrfToken;\n        }\n        if (options && options.body && defaultOptions.headers) {\n            defaultOptions.headers['Content-Type'] = 'application/json';\n        }\n        return lodash_merge_1.default({}, defaultOptions, options);\n    };\n    RequestSender.prototype._prependHost = function (url) {\n        if (!this._options.host || /^https?:\\/\\//.test(url)) {\n            return url;\n        }\n        return this._options.host.replace(/\\/$/, '') + \"/\" + url.replace(/^\\//, '');\n    };\n    RequestSender.prototype._shouldCacheRequest = function (options) {\n        var method = options.method || 'GET';\n        return method.toUpperCase() === 'GET' && Boolean(options.cache);\n    };\n    RequestSender.prototype._getCachedRequest = function (url, options) {\n        if (this._shouldCacheRequest(options)) {\n            return this._cache.read(url, options);\n        }\n        return null;\n    };\n    RequestSender.prototype._cacheRequest = function (url, options, response) {\n        if (this._shouldCacheRequest(options)) {\n            this._cache.write(url, options, response);\n        }\n    };\n    RequestSender.prototype._isAssetRequest = function (url, options) {\n        if (options && options.method && options.method.toUpperCase() !== 'GET') {\n            return false;\n        }\n        return /\\.(png|gif|jpe?g|css|js|json|svg|html?)$/.test(url.split('?')[0]);\n    };\n    return RequestSender;\n}());\nexports.default = RequestSender;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Timeout = (function () {\n    function Timeout(_delay) {\n        var _this = this;\n        this._delay = _delay;\n        this._resolve = function () { };\n        this._promise = new Promise(function (resolve) {\n            _this._resolve = resolve;\n        });\n    }\n    Timeout.prototype.onComplete = function (callback) {\n        this._promise.then(callback);\n    };\n    Timeout.prototype.complete = function () {\n        this._resolve();\n        if (this._timeoutToken) {\n            window.clearTimeout(this._timeoutToken);\n        }\n    };\n    Timeout.prototype.start = function () {\n        var _this = this;\n        if (this._delay) {\n            this._timeoutToken = window.setTimeout(function () { return _this.complete(); }, this._delay);\n        }\n    };\n    return Timeout;\n}());\nexports.default = Timeout;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction toFormUrlEncoded(data) {\n    if (typeof data !== 'object' || data === null) {\n        return data;\n    }\n    return Object.keys(data)\n        .filter(function (key) { return data[key] !== undefined; })\n        .map(function (key) {\n        var value = data[key];\n        if (typeof value === 'string') {\n            return key + \"=\" + encodeURIComponent(value);\n        }\n        return key + \"=\" + encodeURIComponent(JSON.stringify(value) || '');\n    })\n        .join('&');\n}\nexports.default = toFormUrlEncoded;\n","'use strict';\nvar strictUriEncode = require('strict-uri-encode');\nvar objectAssign = require('object-assign');\nvar decodeComponent = require('decode-uri-component');\n\nfunction encoderForArrayFormat(opts) {\n\tswitch (opts.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn function (key, value, index) {\n\t\t\t\treturn value === null ? [\n\t\t\t\t\tencode(key, opts),\n\t\t\t\t\t'[',\n\t\t\t\t\tindex,\n\t\t\t\t\t']'\n\t\t\t\t].join('') : [\n\t\t\t\t\tencode(key, opts),\n\t\t\t\t\t'[',\n\t\t\t\t\tencode(index, opts),\n\t\t\t\t\t']=',\n\t\t\t\t\tencode(value, opts)\n\t\t\t\t].join('');\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn function (key, value) {\n\t\t\t\treturn value === null ? encode(key, opts) : [\n\t\t\t\t\tencode(key, opts),\n\t\t\t\t\t'[]=',\n\t\t\t\t\tencode(value, opts)\n\t\t\t\t].join('');\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn function (key, value) {\n\t\t\t\treturn value === null ? encode(key, opts) : [\n\t\t\t\t\tencode(key, opts),\n\t\t\t\t\t'=',\n\t\t\t\t\tencode(value, opts)\n\t\t\t\t].join('');\n\t\t\t};\n\t}\n}\n\nfunction parserForArrayFormat(opts) {\n\tvar result;\n\n\tswitch (opts.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn function (key, value, accumulator) {\n\t\t\t\tresult = /\\[(\\d*)\\]$/.exec(key);\n\n\t\t\t\tkey = key.replace(/\\[\\d*\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = {};\n\t\t\t\t}\n\n\t\t\t\taccumulator[key][result[1]] = value;\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn function (key, value, accumulator) {\n\t\t\t\tresult = /(\\[\\])$/.exec(key);\n\t\t\t\tkey = key.replace(/\\[\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t} else if (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = [value];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn function (key, value, accumulator) {\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\t}\n}\n\nfunction encode(value, opts) {\n\tif (opts.encode) {\n\t\treturn opts.strict ? strictUriEncode(value) : encodeURIComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction keysSorter(input) {\n\tif (Array.isArray(input)) {\n\t\treturn input.sort();\n\t} else if (typeof input === 'object') {\n\t\treturn keysSorter(Object.keys(input)).sort(function (a, b) {\n\t\t\treturn Number(a) - Number(b);\n\t\t}).map(function (key) {\n\t\t\treturn input[key];\n\t\t});\n\t}\n\n\treturn input;\n}\n\nfunction extract(str) {\n\tvar queryStart = str.indexOf('?');\n\tif (queryStart === -1) {\n\t\treturn '';\n\t}\n\treturn str.slice(queryStart + 1);\n}\n\nfunction parse(str, opts) {\n\topts = objectAssign({arrayFormat: 'none'}, opts);\n\n\tvar formatter = parserForArrayFormat(opts);\n\n\t// Create an object with no prototype\n\t// https://github.com/sindresorhus/query-string/issues/47\n\tvar ret = Object.create(null);\n\n\tif (typeof str !== 'string') {\n\t\treturn ret;\n\t}\n\n\tstr = str.trim().replace(/^[?#&]/, '');\n\n\tif (!str) {\n\t\treturn ret;\n\t}\n\n\tstr.split('&').forEach(function (param) {\n\t\tvar parts = param.replace(/\\+/g, ' ').split('=');\n\t\t// Firefox (pre 40) decodes `%3D` to `=`\n\t\t// https://github.com/sindresorhus/query-string/pull/37\n\t\tvar key = parts.shift();\n\t\tvar val = parts.length > 0 ? parts.join('=') : undefined;\n\n\t\t// missing `=` should be `null`:\n\t\t// http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n\t\tval = val === undefined ? null : decodeComponent(val);\n\n\t\tformatter(decodeComponent(key), val, ret);\n\t});\n\n\treturn Object.keys(ret).sort().reduce(function (result, key) {\n\t\tvar val = ret[key];\n\t\tif (Boolean(val) && typeof val === 'object' && !Array.isArray(val)) {\n\t\t\t// Sort object keys, not values\n\t\t\tresult[key] = keysSorter(val);\n\t\t} else {\n\t\t\tresult[key] = val;\n\t\t}\n\n\t\treturn result;\n\t}, Object.create(null));\n}\n\nexports.extract = extract;\nexports.parse = parse;\n\nexports.stringify = function (obj, opts) {\n\tvar defaults = {\n\t\tencode: true,\n\t\tstrict: true,\n\t\tarrayFormat: 'none'\n\t};\n\n\topts = objectAssign(defaults, opts);\n\n\tif (opts.sort === false) {\n\t\topts.sort = function () {};\n\t}\n\n\tvar formatter = encoderForArrayFormat(opts);\n\n\treturn obj ? Object.keys(obj).sort(opts.sort).map(function (key) {\n\t\tvar val = obj[key];\n\n\t\tif (val === undefined) {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (val === null) {\n\t\t\treturn encode(key, opts);\n\t\t}\n\n\t\tif (Array.isArray(val)) {\n\t\t\tvar result = [];\n\n\t\t\tval.slice().forEach(function (val2) {\n\t\t\t\tif (val2 === undefined) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tresult.push(formatter(key, val2, result.length));\n\t\t\t});\n\n\t\t\treturn result.join('&');\n\t\t}\n\n\t\treturn encode(key, opts) + '=' + encode(val, opts);\n\t}).filter(function (x) {\n\t\treturn x.length > 0;\n\t}).join('&') : '';\n};\n\nexports.parseUrl = function (str, opts) {\n\treturn {\n\t\turl: str.split('?')[0] || '',\n\t\tquery: parse(extract(str), opts)\n\t};\n};\n"],"names":["BrowserSupport","rel","link","document","createElement","relList","supports","exports","script_loader_1","browser_support_1","request_sender_1","stylesheet_loader_1","instance","create_script_loader_1","create_stylesheet_loader_1","_browserSupport","_requestSender","_scripts","_preloadedScripts","ScriptLoader","src","options","this","Promise","resolve","reject","script","_b","async","_c","attributes","Object","keys","forEach","key","setAttribute","onload","onreadystatechange","onerror","event","_this","body","appendChild","urls","all","map","url","loadScript","then","prefetch","canSupportRel","preloadedScript","as","href","head","get","credentials","headers","Accept","catch","preloadScript","_stylesheets","_preloadedStylesheets","StylesheetLoader","stylesheet","prepend","children","insertBefore","loadStylesheet","preloadedStylesheet","preloadStylesheet","defineProperty","value","queryString","require","__importStar","DefaultCache","_cache","prototype","read","cacheKey","getKey","params","write","response","length","stringify","tslib_1","cookie","payload_transformer_1","__importDefault","request_factory_1","default","timeout_1","delay","create_request_sender_1","createRequestSender","create_timeout_1","createTimeout","RequestSender","Timeout","promise","to_form_url_encoded_1","JSON_CONTENT_TYPE_REGEXP","FORM_URLENCODED_CONTENT_TYPE_REGEXP","PayloadTransformer","toRequestBody","contentType","_getHeader","test","JSON","toResponse","xhr","_parseResponseHeaders","getAllResponseHeaders","_parseResponseBody","responseText","status","statusText","parse","rawHeaders","replace","split","reduce","line","_a","parts","shift","trim","__assign","toLowerCase","join","RequestFactory","createRequest","XMLHttpRequest","_configureRequest","open","method","_formatUrl","encodeParams","_configureRequestHeaders","withCredentials","timeout","filter","setRequestHeader","encode","lodash_merge_1","cache_1","is_promise_1","_requestFactory","_payloadTransformer","_cookie","_options","cache","sendRequest","requestOptions","_mergeDefaultOptions","cachedRequest","_getCachedRequest","request","_prependHost","requestHandler","_cacheRequest","onabort","ontimeout","onComplete","abort","start","send","post","put","patch","delete","defaultOptions","csrfToken","_isAssetRequest","host","_shouldCacheRequest","toUpperCase","Boolean","_delay","_resolve","_promise","callback","complete","_timeoutToken","window","clearTimeout","setTimeout","data","undefined","encodeURIComponent","strictUriEncode","objectAssign","decodeComponent","opts","strict","keysSorter","input","Array","isArray","sort","a","b","Number","extract","str","queryStart","indexOf","slice","formatter","result","arrayFormat","accumulator","exec","concat","parserForArrayFormat","ret","create","param","val","obj","index","encoderForArrayFormat","val2","push","x","parseUrl","query"],"sourceRoot":""}